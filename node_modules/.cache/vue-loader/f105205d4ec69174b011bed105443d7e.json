{"remainingRequest":"/Users/marcoseiza/LocalDocuments/3152/GraveyardShift/level-editor/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/marcoseiza/LocalDocuments/3152/GraveyardShift/level-editor/src/components/Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/marcoseiza/LocalDocuments/3152/GraveyardShift/level-editor/src/components/Dashboard.vue","mtime":1616642493920},{"path":"/Users/marcoseiza/LocalDocuments/3152/GraveyardShift/level-editor/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marcoseiza/LocalDocuments/3152/GraveyardShift/level-editor/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/marcoseiza/LocalDocuments/3152/GraveyardShift/level-editor/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marcoseiza/LocalDocuments/3152/GraveyardShift/level-editor/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMZXZlbE1hcCBmcm9tICJAL2NvbXBvbmVudHMvTGV2ZWxNYXAudnVlIjsKaW1wb3J0IFRvb2xCYXIgZnJvbSAiQC9jb21wb25lbnRzL1Rvb2xCYXIudnVlIjsKCi8vIFVQREFURSBUSEUgVkVSU0lPTiBOVU1CRVIgV0hFTiBUSEUgSlNPTiBDSEFOR0VTCi8vIFRPRE8gLSBjb252ZXJ0IG9sZCB2ZXJzaW9ucyB0byBuZXcgdmVyc2lvbnMgc29tZWhvdwpjb25zdCB2ZXJzaW9uTnVtYmVyID0gIjEuMCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBMZXZlbE1hcCwgVG9vbEJhciB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB3aWR0aDogMCwKICAgICAgaGVpZ2h0OiAwLAogICAgICByb3dzOiAiIiwKICAgICAgY29sczogIiIsCiAgICAgIGxldmVsTnVtYmVyOiAwLAogICAgICBkaW1lbnNpb25zU2V0OiBmYWxzZSwKICAgICAgdHlwZVBsYWNpbmc6ICJmbG9vciIsCiAgICAgIHRpbGVzOiBbXSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyB1cGRhdGUgdGhlIGJvYXJkIGRpbWVuc2lvbnMgb24gYnV0dG9uIGNsaWNrCiAgICB1cGRhdGVEaW1lbnNpb25zKCkgewogICAgICB0aGlzLndpZHRoID0gTnVtYmVyKHRoaXMuY29scyk7CiAgICAgIHRoaXMuaGVpZ2h0ID0gTnVtYmVyKHRoaXMucm93cyk7CiAgICAgIHRoaXMuZGltZW5zaW9uc1NldCA9IHRydWU7CiAgICB9LAogICAgLy8gd2hlbiB0aGUgdGlsZXMgYXJlIHVwZGF0ZWQgaW4gTGV2ZWxNYXAsIHVwZGF0ZSB0aGVtIGluIERhc2hib2FyZCBmb3IgSlNPTiBwdXJwb3NlcwogICAgdXBkYXRlVGlsZXModGlsZXMpIHsKICAgICAgdGhpcy50aWxlcyA9IHRpbGVzOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnRpbGVzKTsKICAgIH0sCiAgICAvLyB1cGRhdGUgdGhlIHRpbGUgYmVpbmcgcGxhY2VkIHdoZW4gYSBidXR0b24gaXMgY2xpY2tlZCBvbiBpbiBUb29sQmFyCiAgICB1cGRhdGVUaWxlUGxhY2luZyh0eXBlKSB7CiAgICAgIHRoaXMudHlwZVBsYWNpbmcgPSB0eXBlOwogICAgfSwKICAgIC8vIGNyZWF0ZSB0aGUganNvbiBiYXNlZCBvbiB0aGUgbWFwIGFuZCBjYWxsIHRoZSBvdXRwdXQgbWV0aG9kCiAgICB3cml0ZUpTT04oKSB7CiAgICAgIC8vIFRPRE8gLSByZW1vdmUgaGFyZGNvZGVkIHZhbHVlcwogICAgICBsZXQganNvbiA9IHt9OwogICAgICBqc29uWyJ2ZXJzaW9uIl0gPSB2ZXJzaW9uTnVtYmVyOwoKICAgICAgbGV0IG11dGFudFNwYXducyA9IHRoaXMuZmluZE9iamVjdHMoIm11dGFudCIpOwogICAgICBsZXQgYnJpY2tTcGF3bnMgPSB0aGlzLmZpbmRPYmplY3RzKCJicmljayIpOwogICAgICBsZXQgYm9tYlNwYXducyA9IHRoaXMuZmluZE9iamVjdHMoImJvbWIiKTsKICAgICAgbGV0IGl0ZW1TcGF3bnMgPSB0aGlzLmdlbmVyYXRlSXRlbVNwYXducyhicmlja1NwYXducywgYm9tYlNwYXducyk7CgogICAgICAvLyBzZXQgbWV0YWRhdGEKICAgICAgbGV0IG1ldGFkYXRhID0gewogICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLAogICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsCiAgICAgICAgInBsYXllci1zcGF3biI6IHRoaXMuZmluZFBsYXllcigpLAogICAgICAgICJtdXRhbnQtY291bnQiOiBtdXRhbnRTcGF3bnMubGVuZ3RoLAogICAgICAgICJtdXRhbnQtc3Bhd25zIjogbXV0YW50U3Bhd25zLAogICAgICAgICJpdGVtLWNvdW50IjogYnJpY2tTcGF3bnMubGVuZ3RoICsgYm9tYlNwYXducy5sZW5ndGgsCiAgICAgICAgIml0ZW0tc3Bhd25zIjogaXRlbVNwYXducywKICAgICAgfTsKICAgICAganNvblsibWV0YWRhdGEiXSA9IG1ldGFkYXRhOwoKICAgICAgLy8gc2V0IGxheW91dAogICAgICBsZXQgbGF5b3V0ID0gW107CiAgICAgIGZvciAobGV0IHIgPSB0aGlzLmhlaWdodCAtIDE7IHIgPj0gMDsgci0tKSB7CiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLndpZHRoOyBjKyspIHsKICAgICAgICAgIGlmICh0aGlzLnRpbGVzW3JdW2NdID09PSAid2FsbCIpIHsKICAgICAgICAgICAgbGF5b3V0LnB1c2goMSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGlsZXNbcl1bY10gPT09ICJnbGFzcyIpIHsKICAgICAgICAgICAgbGF5b3V0LnB1c2goMik7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGlsZXNbcl1bY10gPT09ICJnb2FsIikgewogICAgICAgICAgICBsYXlvdXQucHVzaCg0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxheW91dC5wdXNoKDApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBqc29uWyJsYXlvdXQiXSA9IGxheW91dDsKICAgICAgY29uc29sZS5sb2coanNvbik7CgogICAgICB0aGlzLm91dHB1dEpTT05Ub0ZpbGUoanNvbik7CiAgICB9LAogICAgLy8gb3V0cHV0IGpzb24gdG8gYSBmaWxlIHdpdGggcHJvdmlkZWQgbGV2ZWwgbnVtYmVyIGFuZCBhdXRvbWF0aWNhbGx5IGRvd25sb2FkIGl0IHRvIHRoZSB1c2VyJ3MgY29tcHV0ZXIKICAgIG91dHB1dEpTT05Ub0ZpbGUoanNvbikgewogICAgICAvLyBjb2RlIHNvdXJjZTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDg2MTE2NzEvdnVlLWpzLXdyaXRlLWpzb24tb2JqZWN0LXRvLWxvY2FsLWZpbGUKICAgICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGpzb24pOwogICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2RhdGFdLCB7IHR5cGU6ICJ0ZXh0L3BsYWluIiB9KTsKICAgICAgY29uc3QgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50cyIpLAogICAgICAgIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgIGEuZG93bmxvYWQgPSAibGV2ZWwiICsgdGhpcy5sZXZlbE51bWJlciArICIuanNvbiI7CiAgICAgIGEuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICBhLmRhdGFzZXQuZG93bmxvYWR1cmwgPSBbInRleHQvanNvbiIsIGEuZG93bmxvYWQsIGEuaHJlZl0uam9pbigiOiIpOwogICAgICBlLmluaXRFdmVudCgKICAgICAgICAiY2xpY2siLAogICAgICAgIHRydWUsCiAgICAgICAgZmFsc2UsCiAgICAgICAgd2luZG93LAogICAgICAgIDAsCiAgICAgICAgMCwKICAgICAgICAwLAogICAgICAgIDAsCiAgICAgICAgMCwKICAgICAgICBmYWxzZSwKICAgICAgICBmYWxzZSwKICAgICAgICBmYWxzZSwKICAgICAgICBmYWxzZSwKICAgICAgICAwLAogICAgICAgIG51bGwKICAgICAgKTsKICAgICAgYS5kaXNwYXRjaEV2ZW50KGUpOwogICAgfSwKICAgIC8vIHJldHVybnMgdGhlIGxvY2F0aW9uIG9mIHRoZSBwbGF5ZXIsIG9yIGFuIGVtcHR5IGFycmF5IGlmIG5vdCBmb3VuZAogICAgLy8gVE9ETyAtIHNob3VsZCB3ZSByZXF1aXJlIGEgcGxheWVyIHRvIGV4aXN0CiAgICAvLyBUT0RPIC0gYWRkZWQgdHJhbnNmb3JtcyB0byBoZXJlIGFuZCBvdGhlciBtZXRob2RzIHRvIG1hdGNoIGpzb24sIG1heWJlIGpzb24gZmlsZSBzaG91bGQgYmUgY2hhbmdlZAogICAgZmluZFBsYXllcigpIHsKICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCB0aGlzLmhlaWdodDsgcisrKSB7CiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLndpZHRoOyBjKyspIHsKICAgICAgICAgIGlmICh0aGlzLnRpbGVzW3JdW2NdID09PSAicGxheWVyIikgewogICAgICAgICAgICByZXR1cm4gW2MsIHRoaXMuaGVpZ2h0IC0gciAtIDFdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gW107CiAgICB9LAogICAgLy8gcmV0dXJucyBhIDJkIGFycmF5IHJlcHJlc2VudGluZyBhbGwgcG9zaXRpb25zIG9mIG9iamVjdFR5cGUKICAgIC8vIHVzZWQgdG8gZmluZCBtdXRhbnRzLCBib21icywgYnJpY2tzLCBldGMuCiAgICBmaW5kT2JqZWN0cyhvYmplY3RUeXBlKSB7CiAgICAgIGxldCBvYmplY3RMaXN0ID0gW107CiAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgdGhpcy5oZWlnaHQ7IHIrKykgewogICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy53aWR0aDsgYysrKSB7CiAgICAgICAgICBpZiAodGhpcy50aWxlc1tyXVtjXSA9PT0gb2JqZWN0VHlwZSkgewogICAgICAgICAgICBvYmplY3RMaXN0LnB1c2goW2MsIHRoaXMuaGVpZ2h0IC0gciAtIDFdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG9iamVjdExpc3Q7CiAgICB9LAogICAgLy8gcmV0dXJucyB0aGUganNvbiByZXByZXNlbnRhdGlvbiBvZiBhbGwgdGhlIGl0ZW0gdHlwZXMgYW5kIHRoZWlyIGxvY2F0aW9ucwogICAgZ2VuZXJhdGVJdGVtU3Bhd25zKGJyaWNrcywgYm9tYnMpIHsKICAgICAgbGV0IGl0ZW1TcGF3bnMgPSBbXTsKICAgICAgYnJpY2tzLmZvckVhY2goKGIpID0+IHsKICAgICAgICBsZXQgaXRlbSA9IHt9OwogICAgICAgIGl0ZW0udHlwZSA9ICJCUklDSyI7CiAgICAgICAgaXRlbS5wb3NpdGlvbiA9IGI7CiAgICAgICAgaXRlbVNwYXducy5wdXNoKGl0ZW0pOwogICAgICB9KTsKCiAgICAgIGJvbWJzLmZvckVhY2goKGIpID0+IHsKICAgICAgICBsZXQgaXRlbSA9IHt9OwogICAgICAgIGl0ZW0udHlwZSA9ICJCT01CIjsKICAgICAgICBpdGVtLnBvc2l0aW9uID0gYjsKICAgICAgICBpdGVtU3Bhd25zLnB1c2goaXRlbSk7CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIGl0ZW1TcGF3bnM7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"dashboard\">\n    <h1>Level Editor</h1>\n    <div class=\"sizeWrapper\">\n      <span>What size should the level be (in tiles, width x height)?</span>\n      <div class=\"sizeInputs\">\n        <input class=\"input\" v-model=\"cols\" /> x\n        <input class=\"input\" v-model=\"rows\" />\n      </div>\n      <button class=\"button\" @click=\"updateDimensions\">Create Map</button>\n    </div>\n    <div class=\"toolsAndMapWrapper\" v-if=\"dimensionsSet\">\n      <tool-bar @update-tile-placing=\"updateTilePlacing\" />\n      <level-map\n        :height=\"height\"\n        :width=\"width\"\n        :typeToPlace=\"typePlacing\"\n        @tile-changed=\"updateTiles\"\n      />\n    </div>\n    <div v-if=\"dimensionsSet\" class=\"outputWrapper\">\n      <span>Level Number:</span>\n      <input class=\"input\" v-model=\"levelNumber\" />\n      <button @click=\"writeJSON\">Output File</button>\n      <div class=\"instructions\">\n        <h3 class=\"instructionsTitle\">\n          Instructions For Downloading and Playing the Level\n        </h3>\n        <ol class=\"instructionsList\">\n          <li>\n            Set the level number as 1 + the current max level in the codebase.\n          </li>\n          <li>\n            After downloading, add the level to /core/assets/levels/\n          </li>\n          <li>\n            Set the maxLevels variable in GameplayController to this level\n            number.\n          </li>\n          <li>\n            Add an import for this new JSON file in /core/assets/assets.json\n          </li>\n          <li>\n            After all of this, the level should be playable!\n          </li>\n        </ol>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport LevelMap from \"@/components/LevelMap.vue\";\nimport ToolBar from \"@/components/ToolBar.vue\";\n\n// UPDATE THE VERSION NUMBER WHEN THE JSON CHANGES\n// TODO - convert old versions to new versions somehow\nconst versionNumber = \"1.0\";\n\nexport default {\n  components: { LevelMap, ToolBar },\n  data() {\n    return {\n      width: 0,\n      height: 0,\n      rows: \"\",\n      cols: \"\",\n      levelNumber: 0,\n      dimensionsSet: false,\n      typePlacing: \"floor\",\n      tiles: [],\n    };\n  },\n  methods: {\n    // update the board dimensions on button click\n    updateDimensions() {\n      this.width = Number(this.cols);\n      this.height = Number(this.rows);\n      this.dimensionsSet = true;\n    },\n    // when the tiles are updated in LevelMap, update them in Dashboard for JSON purposes\n    updateTiles(tiles) {\n      this.tiles = tiles;\n      console.log(this.tiles);\n    },\n    // update the tile being placed when a button is clicked on in ToolBar\n    updateTilePlacing(type) {\n      this.typePlacing = type;\n    },\n    // create the json based on the map and call the output method\n    writeJSON() {\n      // TODO - remove hardcoded values\n      let json = {};\n      json[\"version\"] = versionNumber;\n\n      let mutantSpawns = this.findObjects(\"mutant\");\n      let brickSpawns = this.findObjects(\"brick\");\n      let bombSpawns = this.findObjects(\"bomb\");\n      let itemSpawns = this.generateItemSpawns(brickSpawns, bombSpawns);\n\n      // set metadata\n      let metadata = {\n        width: this.width,\n        height: this.height,\n        \"player-spawn\": this.findPlayer(),\n        \"mutant-count\": mutantSpawns.length,\n        \"mutant-spawns\": mutantSpawns,\n        \"item-count\": brickSpawns.length + bombSpawns.length,\n        \"item-spawns\": itemSpawns,\n      };\n      json[\"metadata\"] = metadata;\n\n      // set layout\n      let layout = [];\n      for (let r = this.height - 1; r >= 0; r--) {\n        for (let c = 0; c < this.width; c++) {\n          if (this.tiles[r][c] === \"wall\") {\n            layout.push(1);\n          } else if (this.tiles[r][c] === \"glass\") {\n            layout.push(2);\n          } else if (this.tiles[r][c] === \"goal\") {\n            layout.push(4);\n          } else {\n            layout.push(0);\n          }\n        }\n      }\n      json[\"layout\"] = layout;\n      console.log(json);\n\n      this.outputJSONToFile(json);\n    },\n    // output json to a file with provided level number and automatically download it to the user's computer\n    outputJSONToFile(json) {\n      // code source: https://stackoverflow.com/questions/48611671/vue-js-write-json-object-to-local-file\n      const data = JSON.stringify(json);\n      const blob = new Blob([data], { type: \"text/plain\" });\n      const e = document.createEvent(\"MouseEvents\"),\n        a = document.createElement(\"a\");\n      a.download = \"level\" + this.levelNumber + \".json\";\n      a.href = window.URL.createObjectURL(blob);\n      a.dataset.downloadurl = [\"text/json\", a.download, a.href].join(\":\");\n      e.initEvent(\n        \"click\",\n        true,\n        false,\n        window,\n        0,\n        0,\n        0,\n        0,\n        0,\n        false,\n        false,\n        false,\n        false,\n        0,\n        null\n      );\n      a.dispatchEvent(e);\n    },\n    // returns the location of the player, or an empty array if not found\n    // TODO - should we require a player to exist\n    // TODO - added transforms to here and other methods to match json, maybe json file should be changed\n    findPlayer() {\n      for (let r = 0; r < this.height; r++) {\n        for (let c = 0; c < this.width; c++) {\n          if (this.tiles[r][c] === \"player\") {\n            return [c, this.height - r - 1];\n          }\n        }\n      }\n      return [];\n    },\n    // returns a 2d array representing all positions of objectType\n    // used to find mutants, bombs, bricks, etc.\n    findObjects(objectType) {\n      let objectList = [];\n      for (let r = 0; r < this.height; r++) {\n        for (let c = 0; c < this.width; c++) {\n          if (this.tiles[r][c] === objectType) {\n            objectList.push([c, this.height - r - 1]);\n          }\n        }\n      }\n      return objectList;\n    },\n    // returns the json representation of all the item types and their locations\n    generateItemSpawns(bricks, bombs) {\n      let itemSpawns = [];\n      bricks.forEach((b) => {\n        let item = {};\n        item.type = \"BRICK\";\n        item.position = b;\n        itemSpawns.push(item);\n      });\n\n      bombs.forEach((b) => {\n        let item = {};\n        item.type = \"BOMB\";\n        item.position = b;\n        itemSpawns.push(item);\n      });\n\n      return itemSpawns;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.sizeWrapper {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.sizeInputs {\n  margin-top: 0.5rem;\n  display: flex;\n}\n\n.input {\n  max-width: 2rem;\n  margin: 0 0.5rem;\n}\n\n.button {\n  margin-top: 0.5rem;\n}\n\n.toolsAndMapWrapper {\n  display: flex;\n  justify-content: center;\n}\n\n.outputWrapper {\n  margin-top: 1rem;\n}\n\n.instructions {\n  display: flex;\n  flex-direction: column;\n  justify-content: left;\n  text-align: left;\n}\n\n.instructionsTitle {\n  margin-bottom: 0;\n  margin-top: 2rem;\n}\n</style>\n"]}]}